<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="baidu-site-verification" content=""><meta name="google-site-verification" content="UKlpQSB6IlVlxjxgprQbTNRUiLE1BnpIV5zeQ_MYkks"><title> AndroidMkApplicationMkmakemakefile笔记 · 情迁博客</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="AndroidMkApplicationMkmakemakefile笔记 - 情随事迁"><meta name="keywords"><meta name="author" content="情随事迁"><meta name="referrer" content="no-referrer"><link rel="short icon" href="/images/favicon.ico"><link rel="stylesheet" href="/css/bubuzou.css"><link rel="search" type="application/opensearchdescription+xml" href="https://lozn.top/atom.xml" title="情迁博客"><meta name="generator" content="Hexo 5.4.1"></head><body><header><div class="header row"> <a href="/" class="logo-link"><img src="/images/logo.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/archives/" target="_self" data-hover="归档" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="https://godhand.lozn.top" target="_blank" data-hover="神之手" class="nav-list-link">神之手</a></li><li class="nav-list-item"><a href="https://robot.lozn.top" target="_blank" data-hover="机器人" class="nav-list-link">机器人</a></li><li class="nav-list-item"><a href="/categories/情迁软件/" target="_self" data-hover="情迁" class="nav-list-link">情迁</a></li><li class="nav-list-item"><a href="https://www.jianshu.com/u/9b0768e66d01" target="_blank" data-hover="简书" class="nav-list-link">简书</a></li><li class="nav-list-item"><a href="/update/" target="_self" data-hover="下载" class="nav-list-link">下载</a></li><li class="nav-list-item"><a href="/about/" target="_self" data-hover="关于" class="nav-list-link">关于</a></li></ul><div class="search"><a id="search_btn" href="#search"></a></div></div></header><div class="row scroll-con"><section class="container"><!-- for archive page --><div id="postAr" class="post"><article class="post-block"><h1 class="post-title">AndroidMkApplicationMkmakemakefile笔记</h1><div class="post-info">2018-11-28<p class="visit"><i data-hk-page="current">Loading</i><span>次访问</span></p></div><div class="post-content"><p>简书链接:<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b9e5020e4e7f">AndroidMkApplicationMkmakemakefile笔记</a><br>文章字数：9645,阅读全文大约需要38分钟</p>
<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>这只是笔记。。。。。。。。</p>
<h2 id="从0开始搭建测试环境"><a href="#从0开始搭建测试环境" class="headerlink" title="从0开始搭建测试环境"></a>从0开始搭建测试环境</h2><p>下载android ndk ,然后配置ndk环境变量，使<code>ndk-build</code>命令能在任意目录执行.</p>
<h3 id="目录的规定"><a href="#目录的规定" class="headerlink" title="目录的规定"></a>目录的规定</h3><p>在任意目录创建一个Android.mk和Application.mk<br>然后切换命令行在此目录输入<code>ndk-build</code><br>出现错误</p>
<pre><code>Android NDK: Could not find application project directory !
Android NDK: Please define the NDK_PROJECT_PATH variable to point to it.
D:\env\android_sdk\ndk-bundle\build\\..\build\core\build-local.mk:151: *** Android NDK: Aborting
</code></pre>
<p>百思不得其解,网上的文章没有几篇靠谱的,尝试把这个目录改名为jni,切换到此目录，竟然错误消失了，出现另外一个目录</p>
<h3 id="解决警告"><a href="#解决警告" class="headerlink" title="解决警告"></a>解决警告</h3><p>虽然这个错误没有出现了,但是又出现了2个警告，1是提示定义最小版本，二是定说没有模块.</p>
<pre><code>Android NDK: APP_PLATFORM not set. Defaulting to minimum supported version android-14.
D:/env/android_sdk/ndk-bundle/build//../build/core/build-all.mk:89: Android NDK: WARNING: There are no modules to build in this project!
</code></pre>
<ul>
<li><p>定义版本号<br>在Application.mk定义如下内容:<br><code> APP_PLATFORM:=android-14</code></p>
<p>  E:\cross-c\Androidmk\jni&gt;ndk-build -B<br>  Android NDK: APP_PLATFORM not set. Defaulting to minimum supported version android-14.<br>  D:&#x2F;env&#x2F;android_sdk&#x2F;ndk-bundle&#x2F;build&#x2F;&#x2F;..&#x2F;build&#x2F;core&#x2F;build-all.mk:89: Android NDK: WARNING: There are no modules to build in this project!<br>  make: Nothing to be done for &#96;all’.</p>
</li>
</ul>
<p>这种情况，关闭终端重启.</p>
<h3 id="ndk-build命令帮助"><a href="#ndk-build命令帮助" class="headerlink" title="ndk-build命令帮助"></a>ndk-build命令帮助</h3><p><code>ndk-build V=1</code> 显示详细信息<br><code>ndk-build -B</code> 强制编译</p>
<figure class="highlight plaintext"><figcaption><span>NDK_APPLICATION_MK</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```ndk-build NDK_DEBUG```为1可以实现优化不优化的问题，有符号就能定位堆栈。</span><br><span class="line">`ndk-build NDK_HOST_32BIT=1` 不根据操作系统的64位使用这个构建</span><br><span class="line"> &lt;ndk&gt;/toolchain/&lt;name&gt;/prebuilt/</span><br><span class="line"></span><br><span class="line"> 下面的语法实际上是make命令的语法</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>E:\cross-c\Androidmk\jni&gt;ndk-build –help<br>用例: make [选项] [目标] …<br>Options:<br>  -b, -m                      Ignored for compatibility.忽略兼容性<br>  -B, –always-make           Unconditionally make all targets.无条件完成所有target编译，感觉没啥变化<br>  -C DIRECTORY, –directory&#x3D;DIRECTORY<br>                              Change to DIRECTORY before doing anything. 做任意事情之前改变目录<br>  -d                          Print lots of debugging information.<br>  –debug[&#x3D;FLAGS]          debug模式，打印调试信息    Print various types of debugging information.<br>  -e, –environment-overrides 覆盖makefiles的环境变量<br>                              Environment variables override makefiles.<br>  -f FILE, –file&#x3D;FILE, –makefile&#x3D;FILE 自定义makefile文件<br>                              Read FILE as a makefile.<br>  -h, –help               打印帮助信息and退出<br>  -i, –ignore-errors         Ignore errors from commands.忽略命令行错误<br>  -I DIRECTORY, –include-dir&#x3D;DIRECTORY<br>                              Search DIRECTORY for included makefiles. 定义包含的目录<br>  -j [N], –jobs[&#x3D;N]          Allow N jobs at once; infinite jobs with no arg. 次允许N个作业;没有参数则无限工作<br>  -k, –keep-going            Keep going when some targets can’t be made.当一些目标无法达成时，继续前进。<br>  -l [N], –load-average[&#x3D;N], –max-load[&#x3D;N] 指定平均加载任务<br>                              Don’t start multiple jobs unless load is below N.除非负载小于N，否则不要启动多个作业。<br>  -L, –check-symlink-times   Use the latest mtime between symlinks and target. 用符号链接和目标之间的最新时间。<br>  -n, –just-print, –dry-run, –recon<br>                              Don’t actually run any commands; just print them.不运行实际的命令只是打印。<br>  -o FILE, –old-file&#x3D;FILE, –assume-old&#x3D;FILE<br>                              Consider FILE to be very old and don’t remake it. 认为文件很旧，不要重做。<br>  -p, –print-data-base       Print make’s internal database.打印内部数据库<br>  -q, –question              Run no commands; exit status says if up to date. 退出状态表示是否是最新<br>  -r, –no-builtin-rules      Disable the built-in implicit rules.禁用内置的隐式规则。<br>  -R, –no-builtin-variables   禁用内置变量 Disable the built-in variable settings.<br>  -s, –silent, –quiet      静默模式，不输出信息 Don’t echo commands.<br>  -S, –no-keep-going, –stop<br>                              Turns off -k.<br>  -t, –touch                 Touch targets instead of remaking them.<br>  -v, –version            打印make版本号   Print the version number of make and exit.<br>  -w, –print-directory  打印当前目录     Print the current directory.<br>  –no-print-directory     不打印当前目录   Turn off -w, even if it was turned on implicitly. 隐式打开<br>  -W FILE, –what-if&#x3D;FILE, –new-file&#x3D;FILE, –assume-new&#x3D;FILE<br>                              Consider FILE to be infinitely new. 认为文件是无限新的<br>  –warn-undefined-variables  Warn when an undefined variable is referenced. 引用未定义变量时发出警告。</p>
<pre><code>This program built for i686-w64-mingw32
Report bugs to &lt;bug-make@gnu.org&gt;
E:\cross-c\Androidmk\jni&gt;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## mk语法与AndroidMk的变量与宏 </span><br><span class="line"></span><br><span class="line">android 一般使用```ndk-build```测试的，而不是单纯的玩make,</span><br><span class="line"></span><br><span class="line">**定义变量**</span><br><span class="line">`变量名 := 变量值`</span><br><span class="line"></span><br><span class="line">**判断变量是否存在**</span><br><span class="line"></span><br><span class="line">**变量拼接**</span><br><span class="line">`MY_VAR+=append........</span><br><span class="line">`</span><br><span class="line">**打印字符串**</span><br><span class="line">这里在控制台打印HelloWorld</span><br><span class="line">`$(warning HelloWorld)`</span><br><span class="line">**打印变量**</span><br><span class="line"></span><br><span class="line">    MY_VAR:=I am var</span><br><span class="line">    $(warning $(MY_VAR))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**打印拼接的变量**</span><br><span class="line"></span><br><span class="line">        $(warning 33333$(MY_VAR))</span><br><span class="line"></span><br><span class="line">* 控制台输出的效果</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        E:\cross-c\Androidmk\jni&gt;ndk-build</span><br><span class="line">        E:/cross-c/Androidmk/jni/Application.mk:3: WellcomeUseAndroidMk</span><br><span class="line">        [armeabi-v7a] Compile++ thumb: png &lt;= hello.cpp</span><br><span class="line">        [armeabi-v7a] SharedLibrary  : libpng.so</span><br><span class="line">        [armeabi-v7a] Install        : libpng.so =&gt; libs/armeabi-v7a/libpng.so</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">---------</span><br><span class="line">**打印当前目录**</span><br><span class="line">```$(warning currentPath:$(my-dir))```</span><br><span class="line">```my-dir```变量是android的ndk-build环境才有的，纯make是没有的</span><br><span class="line">**打印CLEAR_VARS**</span><br><span class="line"></span><br><span class="line">```$(CLEAR_VARS)```需要在Android.mk里面编写才能测试</span><br><span class="line"></span><br><span class="line">    $(warning currentPath:$(CLEAR_VARS))</span><br><span class="line">    $(warning ------------------)</span><br><span class="line"></span><br><span class="line">输出结果</span><br><span class="line">```D:/env/android_sdk/ndk-bundle/build//../build/core/clear-vars.mk```</span><br><span class="line"></span><br><span class="line">语法错误的效果</span><br></pre></td></tr></table></figure>
<p>:\cross-c\Androidmk\jni&gt;ndk-build<br>:&#x2F;cross-c&#x2F;Androidmk&#x2F;jni&#x2F;Application.mk:3: *** missing separator.  Stop.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**注释**</span><br><span class="line"></span><br><span class="line">```#```开头就是注释了。</span><br><span class="line">**逻辑分支**</span><br></pre></td></tr></table></figure>
<p>DEBUG:&#x3D;1<br>NAME:&#x3D;qssq<br>SEX:&#x3D;man<br>EMPTY:&#x3D;#定义空<br>SPACE:&#x3D;$(EMPTY) $(EMPTY) #定义空格<br>ifeq ($(DEBUG),1)#关键字后面需要加空格，否则语法错误<br>$(warning 调试模式)<br>else<br>$(warning 非调试模式)<br>endif</p>
<p>#去掉收尾空格进行判断是否为空<br>ifeq ($(strip $(SPACE)),)<br>$(warning SPACE变量去掉首尾空格为空)<br>endif</p>
<h1 id="如果不是空而是空格也是不匹配的。"><a href="#如果不是空而是空格也是不匹配的。" class="headerlink" title="如果不是空而是空格也是不匹配的。"></a>如果不是空而是空格也是不匹配的。</h1><p>ifneq ($(SPACE),)<br>$(warning 不去掉首尾，不是空)<br>endif</p>
<p>#———————————————-<br>ifeq ($(DEBUG),qssq)<br>$(warning 输出了作者)<br>else<br>$(warning 不知道你输入了什么名字,名字是$(NAME))<br>endif</p>
<p>ifeq ($(SEX),man)<br>$(warning 是个男人)<br>endif</p>
<p>#是否SEX等于woman字符串<br>ifneq ($(SEX),woman)<br>$(warning 不是女人)<br>endif</p>
<p>#定义变量 (看上去是一个函数<br>define tempvar<br>$(warning  执行了temp定义)<br>endef</p>
<p>#判断是否定义了tempvar<br>ifdef tempvar<br>$(warning 即将执行tempvar)<br>$(call tempvar)<br>endif</p>
<p>#判断是否定义了tempvar3<br>ifdef tempvar3<br>$(warning 即将执行tempvar3)<br>$(call tempvar3)<br>endif</p>
<p>ifndef tempvar2<br>$(warning 没有定义tempvar2)<br>endif</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">定义多行</span><br><span class="line">如果下一行要继续上一行，则上一行应该以`\`结尾</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### Application.mk内嵌的变量</span><br><span class="line"></span><br><span class="line">#### 设置编译的架构</span><br><span class="line">定义需要编译的架构 多个用空格隔开</span><br><span class="line">`APP_ABI :=arm64-v8a`</span><br><span class="line">或</span><br><span class="line">`APP_ABI:=armeabi-v7a x86 x86_64 arm64-v8a  x86_64`</span><br><span class="line">或</span><br><span class="line">`APP_ABI:=all` 和不填写的效果一样。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**定义目标平台**</span><br><span class="line">`APP_PLATFORM`</span><br><span class="line">接受的变量如  ```android-14```</span><br><span class="line">测试错误的结果</span><br><span class="line">赋值为android-1433 提示这个1433大于最高的版本28，请选择一个支持的api级别，或者设置为```latest```,```latest```的意思就是最新的。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    :/cross-c/Androidmk/jni/Application.mk:6: 33333I am var</span><br><span class="line">    ndroid NDK: android-1433 is above the maximum supported version android-28. Choose a supported API level or set APP_PLATFORM to &quot;latest&quot;.</span><br><span class="line">    :/env/android_sdk/ndk-bundle/build//../build/core/setup-app-platform.mk:127: *** Android NDK: Aborting.    .  Stop.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">设置最高版本```APP_PLATFORM:=latest```</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Android NDK: Using latest available APP_PLATFORM: android-28.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">设置最低版本</span><br><span class="line">最低版本就是不指定```APP_PLATFORM```变量。</span><br></pre></td></tr></table></figure>
<p>Android NDK: APP_PLATFORM not set. Defaulting to minimum supported version android-14.</p>
<pre><code>


**设置最小支持库**
笔者在编译后找不到某些头文件，发现我们的c++大神把我的配置
`gnustl_static`改为了`stlport_static`
如今记忆犹新哈。
```APP_STL``` 


    libstdc++（默认）    默认最小系统 C++ 运行时库。    不适用
    gabi++_static    GAbi++ 运行时（静态）。    C++ 异常和 RTTI
    gabi++_shared    GAbi++ 运行时（共享）。    C++ 异常和 RTTI
    stlport_static    STLport 运行时（静态）。    C++ 异常和 RTTI；标准库
    stlport_shared    STLport 运行时（共享）。    C++ 异常和 RTTI；标准库
    gnustl_static    GNU STL（静态）。    C++ 异常和 RTTI；标准库
    gnustl_shared    GNU STL（共享）。    C++ 异常和 RTTI；标准库
    c++_static    LLVM libc++ 运行时（静态）。    C++ 异常和 RTTI；标准库
    c++_shared    LLVM libc++ 运行时（共享）。    C++ 异常和 RTTI；标准库



### AndroidMk的执行顺序

先执行Application.mk
然后执行Android.mk


## Application.mk官方说明
这里的配置相对于Android.mk比较少

本文档介绍 Application.mk 构建文件，此文件用于描述应用需要的原生模块。 模块可以是静态库、共享库或可执行文件。

建议在阅读本页之前先阅读概念和 Android.mk 页面。 这样有助于您最深入地了解本页的内容。

概览
Application.mk 文件实际上是定义要编译的多个变量的微小 GNU Makefile 片段。 它通常位于 $PROJECT/jni/ 下，其中 $PROJECT 指向应用的项目目录。 另一种方式是将其放在顶级 $NDK/apps/ 目录的子目录下。 例如：
$NDK/apps/&lt;myapp&gt;/Application.mk
这里的 &lt;myapp&gt; 是用于向 NDK 构建系统描述应用的短名称。它不会实际进入生成的共享库或最终软件包。

变量
APP_PROJECT_PATH
此变量用于存储应用项目根目录的绝对路径。构建系统使用此信息将生成的 JNI 共享库的简缩版放入 APK 生成工具已知的特定位置。

如果将 Application.mk 文件放在 $NDK/apps/&lt;myapp&gt;/ 下，则必须定义此变量。 如果将其放在 $PROJECT/jni/ 下，则此变量可选。

APP_OPTIM
将此可选变量定义为 release 或 debug。在构建应用的模块时可使用它来更改优化级别。

发行模式是默认模式，可生成高度优化的二进制文件。调试模式会生成未优化的二进制文件，更容易调试。

请注意，您可以调试发行或调试二进制文件。但发行二进制文件在调试时提供的信息较少。 例如，构建系统会选择某些合适的变量，您无需检查它们。 此外，代码重新排序可能增大单步调试代码的难度；堆叠追踪可能不可靠。

在应用清单的 &lt;application&gt; 标记中声明 android:debuggable 将导致此变量默认使用 debug而非 release。 将 APP_OPTIM 设置为 release 可替换此默认值。

APP_CFLAGS
此变量用于存储构建系统在为任何模块编译任何 C 或 C++ 源代码时传递到编译器的一组 C 编译器标志。 您可使用此变量根据需要它的应用更改指定模块的版本，而无需修改 Android.mk 文件本身。

这些标志中的所有路径应为顶级 NDK 目录的相对路径。例如，如果您有以下设置：

sources/foo/Android.mk
sources/bar/Android.mk
要在 foo/Android.mk 中指定您在编译时要添加指向 bar 源文件的路径，应使用：

APP_CFLAGS += -Isources/bar
或者：

APP_CFLAGS += -I$(LOCAL_PATH)/../bar
-I../bar 在其等于 -I$NDK_ROOT/../bar 后不会运行。

注：此变量仅适用于 android-ndk-1.5_r1 中的 C 源文件，而不适用于 C++ 源文件。 在该版本后的所有版本中，APP_CFLAGS 匹配整个 Android 构建系统。

APP_CPPFLAGS
此变量包含构建系统在仅构建 C++ 源文件时传递到编译器的一组 C++ 编译器标志。

注：在 android-ndk-1.5_r1 中，此变量适用于 C 和 C++ 源文件。 在 NDK 的所有后续版本中，APP_CPPFLAGS 现在匹配整个 Android 构建系统。 对于适用于 C 和 C++ 源文件的标志，请使用 APP_CFLAGS。

APP_LDFLAGS
构建系统在链接应用时传递的一组链接器标志。此变量仅在构建系统构建共享库和可执行文件时才相关。 当构建系统构建静态库时，会忽略这些标志。

APP_BUILD_SCRIPT
默认情况下，NDK 构建系统在 jni/ 下查找名称为 Android.mk 的文件。

如果要改写此行为，可以定义 APP_BUILD_SCRIPT 指向替代构建脚本。 构建系统始终将非绝对路径解释为 NDK 顶级目录的相对路径。

APP_ABI
默认情况下，NDK 构建系统为 armeabi ABI 生成机器代码。 此机器代码对应于基于 ARMv5TE、采用软件浮点运算的 CPU。 您可以使用 APP_ABI 选择不同的 ABI。 表 1 所示为不同指令集的 APP_ABI 设置。

表 1. APP_ABI 不同指令集的设置。

指令集    值
基于 ARMv7 的设备上的硬件 FPU 指令    APP_ABI := armeabi-v7a
ARMv8 AArch64    APP_ABI := arm64-v8a
IA-32    APP_ABI := x86
Intel64    APP_ABI := x86_64
MIPS32    APP_ABI := mips
MIPS64 (r6)    APP_ABI := mips64
所有支持的指令集    APP_ABI := all
注：all 从 NDKr7 开始可用。

您也可以指定多个值，将它们放在同一行上，中间用空格分隔。例如：

APP_ABI := armeabi armeabi-v7a x86 mips
如需了解所有支持的 ABI 列表及其用法和限制的详细信息，请参阅 ABI 管理。

APP_PLATFORM
此变量包含目标 Android 平台的名称。例如，android-3 指定 Android 1.5 系统映像。 如需平台名称和对应 Android 系统映像的完整列表，请参阅 Android NDK 原生 API。

APP_STL
默认情况下，NDK 构建系统为 Android 系统提供的最小 C++ 运行时库 (system/lib/libstdc++.so) 提供 C++ 标头。 此外，它随附您可以在自己的应用中使用或链接的替代 C++ 实现。请使用 APP_STL 选择其中一个。 如需了解有关支持的运行时及其功能的信息，请参阅 NDK 运行时和功能。

APP_SHORT_COMMANDS
相当于 Application.mk 中的 LOCAL_SHORT_COMMANDS，适用于整个项目。如需了解详细信息，请参阅 Android.mk 上此变量的相关文档。

NDK_TOOLCHAIN_VERSION
将此变量定义为 4.9 或 4.8 以选择 GCC 编译器的版本。 64 位 ABI 默认使用版本 4.9 ，32 位 ABI 默认使用版本 4.8。要选择 Clang 的版本，请将此变量定义为 clang3.4、clang3.5 或 clang。 指定 clang 会选择 Clang 的最新版本。

APP_PIE
从 Android 4.1（API 级别 16）开始，Android 的动态链接器支持位置独立的可执行文件 (PIE)。 从 Android 5.0（API 级别 21）开始，可执行文件需要 PIE。要使用 PIE 构建可执行文件，请设置 -fPIE 标志。 此标志增大了通过随机化代码位置来利用内存损坏缺陷的难度。 默认情况下，如果项目针对 android-16 或更高版本，ndk-build 会自动将此值设置为 true。您可以手动将其设置为 true 或 false。

此标志仅适用于可执行文件。它在构建共享或静态库时没有影响。

注：PIE 可执行文件无法在 4.1 版之前的 Android 上运行。

此限制仅适用于可执行文件。它在构建共享或静态库时没有影响。

APP_THIN_ARCHIVE
在 Android.mk 文件中为此项目中的所有静态库模块设置 LOCAL_THIN_ARCHIVE 的默认值。 如需了解详细信息，请参阅 Android.mk 文档中的 LOCAL_THIN_ARCHIVE。


## Android.mk官方说明

基础知识
在详细了解语法之前，先了解 Android.mk 文件所含内容的基本信息很有用。 为此，本节使用 Hello-JNI 示例中的 ```Android.mk``` 文件，解释文件中的每行所起的作用。

Android.mk 文件必须首先定义 ```LOCAL_PATH``` 变量：

```LOCAL_PATH := $(call my-dir)```
此变量表示源文件在开发树中的位置。在这里，构建系统提供的宏函数 my-dir 将返回当前目录（包含 Android.mk 文件本身的目录）的路径。

下一行声明 ```CLEAR_VARS``` 变量，其值由构建系统提供。

```include $(CLEAR_VARS)```
```CLEAR_VARS``` 变量指向特殊 `GNU Makefile`，可为您清除许多 `LOCAL_XXX` 变量，例如 ```LOCAL_MODULE```、`LOCAL_SRC_FILES` 和 `LOCAL_STATIC_LIBRARIES`。 

请注意，它不会清除 `LOCAL_PATH`。此变量必须保留其值，因为系统在单一 GNU Make 执行环境（其中所有变量都是全局的）中解析所有构建控制文件。 在描述每个模块之前，必须声明（重新声明）此变量。

接下来，`LOCAL_MODULE` 变量将存储您要构建的模块的名称。请在应用中每个模块使用一个此变量。

`LOCAL_MODULE := hello-jni`
每个模块名称必须唯一，且不含任何**空格**。构建系统在生成最终共享库文件时，会将正确的前缀和后缀自动添加到您分配给 `LOCAL_MODULE` 的名称。 例如，上述示例会导致生成一个名为 `libhello-jni.so` 的库。

注：如果模块名称的开头已是 lib，则构建系统不会附加额外的前缀 lib；而是按原样采用模块名称，并添加 .so 扩展名。 因此，比如原来名为 libfoo.c 的源文件仍会生成名为 libfoo.so 的共享对象文件。 

此行为是为了支持 Android 平台源文件从 Android.mk 文件生成的库；所有这些库的名称都以 lib 开头。



下一行枚举源文件，以空格分隔多个文件：

`LOCAL_SRC_FILES := hello-jni.c`
`LOCAL_SRC_FILES` 变量必须包含要构建到模块中的 C 和/或 C++ 源文件列表。


最后一行帮助系统将所有内容连接到一起：

`include $(BUILD_SHARED_LIBRARY)`
`BUILD_SHARED_LIBRARY` 变量指向 GNU Makefile 脚本，用于收集您自最近 include 后在 `LOCAL_XXX` 变量中定义的所有信息。 此脚本确定要构建的内容及其操作方法。

示例目录中有更复杂的示例，包括您可以查看的带注释的 Android.mk 文件。 此外，示例：native-activity 详细说明了该示例的 Android.mk 文件。 最后，变量和宏提供本节中变量的进一步信息。

**变量和宏**
构建系统提供许多可用于 Android.mk 文件中的变量。其中许多变量已预先赋值。 另一些变量由您赋值。

除了这些变量之外，您还可以定义自己的任意变量。在定义变量时请注意，NDK 构建

**系统会预留以下变量名称**：

* 以 `LOCAL_ `开头的名称，例如 `LOCAL_MODULE`。
* 以 `PRIVATE_`、`NDK_ `或 `APP` 开头的名称。构建系统在内部使用这些变量。

* 小写名称，例如 my-dir。构建系统也是在内部使用这些变量。

为了方便别人阅读而需要在 Android.mk 文件中定义自己的变量，建议在名称前附加 `MY_`。

NDK 定义的变量
本节讨论构建系统在解析 Android.mk 文件之前定义的 GNU Make 变量。 在某些情况下，NDK 可能会多次解析 Android.mk 文件，每次使用其中某些变量的不同定义。

`CLEAR_VARS`
此变量指向的构建脚本用于取消定义下面“开发者定义的变量”一节中列出的几乎全部 `LOCAL_XXX` 变量。 在描述新模块之前，使用此变量包括此脚本。 使用它的语法为：

    include $(CLEAR_VARS)
    BUILD_SHARED_LIBRARY


此变量指向的脚本用于收集您在 `LOCAL_XXX` 变量中提供的模块所有相关信息，以及确定如何从列出的源文件构建目标共享库。 请注意，使用此脚本要求您至少已为 `LOCAL_MODULE` 和` LOCAL_SRC_FILES `赋值（如需了解有关这些变量的详细信息，请参阅模块描述变量）。

使用此变量的语法为：

`include $(BUILD_SHARED_LIBRARY)`
共享库变量导致构建系统生成具有 .so 扩展名的库文件。

`BUILD_STATIC_LIBRARY`
用于构建静态库的 `BUILD_SHARED_LIBRARY` 的变体。构建系统不会将静态库复制到您的项目/软件包，但可能使用它们构建共享库（请参阅下面的 `LOCAL_STATIC_LIBRARIES` 和 `LOCAL_WHOLE_STATIC_LIBRARIES`）。 使用此变量的语法为：

`include $(BUILD_STATIC_LIBRARY)`
静态库变量导致构建系统生成扩展名为 .a 的库。

`PREBUILT_SHARED_LIBRARY`
指向用于指定预建共享库的构建脚本。与` BUILD_SHARED_LIBRARY` 和 `BUILD_STATIC_LIBRARY` 的情况不同，这里的 `LOCAL_SRC_FILES` 值不能是源文件， 而必须是指向预建共享库的单一路径，例如 foo/libfoo.so。 使用此变量的语法为：

`include $(PREBUILT_SHARED_LIBRARY)`
也可使用 L`OCAL_PREBUILTS` 变量引用另一个模块中的预建库。 如需了解有关使用预建库的详细信息，请参阅使用预建库。

`PREBUILT_STATIC_LIBRARY`
与 PREBUILT_SHARED_LIBRARY 相同，但用于预构建的静态库。如需了解有关使用预建库的详细信息，请参阅使用预建库。

`TARGET_ARCH`
Android 开放源代码项目所指定的目标 CPU 架构的名称。对于与 ARM 兼容的任何构建，请使用独立于 CPU 架构修订版或 ABI 的 arm（请参阅下面的 `TARGET_ARCH_ABI`）。

此变量的值取自您在 Android.mk 文件中定义的 `APP_ABI` 变量，系统将在解析 Android.mk 文件前读取其值。(翻译:应该是Application.mk)

`TARGET_PLATFORM`
作为构建系统目标的 Android API 级别号。例如，Android 5.1 系统映像对应于 Android API 级别 22：android-22。如需平台名称及相应 Android 系统映像的完整列表，请参阅 Android NDK 原生 API。以下示例显示了使用此变量的语法：

`TARGET_PLATFORM := android-22`
`TARGET_ARCH_ABI`
当构建系统解析此 Android.mk 文件时，此变量将 CPU 和架构的名称存储到目标。 您可以指定以下一个或多个值，使用空格作为多个目标之间的分隔符。 表 1 显示了要用于每个支持的 CPU 和架构的 ABI 设置。

表 1. 不同 CPU 和架构的 ABI 设置。


    CPU 和架构|设置的参数
    ARMv5TE    armeabi
    ARMv7    armeabi-v7a
    ARMv8 AArch64    arm64-v8a
    i686    x86
    x86-64    x86_64
    mips32 (r1)    mips
    mips64 (r6)    mips64
    全部    all

以下示例显示如何将 ARMv8 AArch64 设置为目标 CPU 与 ABI 的组合：

`TARGET_ARCH_ABI := arm64-v8a`
注：在 Android NDK 1.6_r1 和以前的版本中，此变量定义为 arm。

如需了解架构 ABI 和相关兼容性问题的详细信息，请参阅 ABI 管理。

未来的新目标 ABI 将有不同的值。

`TARGET_ABI`
目标 Android API 级别与 ABI 的联接，特别适用于要针对实际设备测试特定目标系统映像的情况。 例如，要指定在 Android API 级别 22 上运行的 64 位 ARM 设备：

`TARGET_ABI := android-22-arm64-v8a`
注：在 Android NDK 1.6_r1 和以前的版本中，默认值为 `android-3-arm`。

模块描述变量
本节中的变量向构建系统描述您的模块。每个模块描述应遵守以下基本流程：

使用 CLEAR_VARS 变量初始化或取消定义与模块相关的变量。
为用于描述模块的变量赋值。
使用 BUILD_XXX 变量设置 NDK 构建系统，以便为模块使用适当的构建脚本。
`LOCAL_PATH`
此变量用于指定当前文件的路径。必须在 Android.mk 文件的开头定义它。 以下示例向您展示如何操作：

`LOCAL_PATH := $(call my-dir)`
`CLEAR_VARS` 指向的脚本不会清除此变量。因此，即使您的 Android.mk 文件描述了多个模块，您也只需定义它一次。

`LOCAL_MODULE`
此变量用于存储模块的名称。它在所有模块名称之间必须唯一，并且不得包含任何空格。 必须在包含任何脚本（用于 CLEAR_VARS 的脚本除外）之前定义它。 无需添加 lib 前缀或者 .so 或 .a 文件扩展名；构建系统会自动进行这些修改。 在整个 Android.mk 和 Application.mk 文件中，请通过未修改的名称引用模块。 例如，以下行会导致生成名为 libfoo.so 的共享库模块：

`LOCAL_MODULE := &quot;foo&quot;`
如果希望生成的模块使用 lib 以外的名称和 LOCAL_MODULE 以外的值，可以使用 `LOCAL_MODULE_FILENAME` 变量为生成的模块指定自己选择的名称。

`LOCAL_MODULE_FILENAME`
此可选变量可让您覆盖构建系统默认用于其生成的文件的名称。 例如，如果 LOCAL_MODULE 的名称为 foo，您可以强制系统将它生成的文件命名为 libnewfoo。 以下示例显示如何完成此操作：

`LOCAL_MODULE := foo`
`LOCAL_MODULE_FILENAME := libnewfoo`
对于共享库模块，此示例将生成一个名为 libnewfoo.so 的文件。

注：无法替换文件路径或文件扩展名。

`LOCAL_SRC_FILES`
此变量包含构建系统用于生成模块的源文件列表。 只列出构建系统实际传递到编译器的文件，因为构建系统会自动计算所有关联的依赖关系。

请注意，可以使用相对文件路径（指向 LOCAL_PATH）和绝对文件路径。

建议避免使用绝对文件路径；相对路径会使 Android.mk 文件移植性更强。

注：在构建文件中务必使用 Unix 样式的正斜杠 (/)。构建系统无法正确处理 Windows 样式的反斜杠 (\)。

```LOCAL_CPP_EXTENSION```
可以使用此可选变量为 C++ 源文件指明 .cpp 以外的文件扩展名。 例如，以下行会将扩展名改为 .cxx。（设置必须包含点。）

LOCAL_CPP_EXTENSION := .cxx
从 NDK r7 开始，您可以使用此变量指定多个扩展名。例如：

```LOCAL_CPP_EXTENSION := .cxx .cpp .cc```
LOCAL_CPP_FEATURES
可以使用此可选变量指明您的代码依赖于特定 C++ 功能。它在构建过程中启用正确的编译器和链接器标志。 对于预构建的库，此变量还可声明二进制文件依赖哪些功能，从而帮助确保最终关联正确工作。 建议使用此变量，而不要直接在 LOCAL_CPPFLAGS 定义中启用 -frtti 和 -fexceptions。

使用此变量可让构建系统对每个模块使用适当的标志。使用 LOCAL_CPPFLAGS 会导致编译器对所有模块使用所有指定的标志，而不管实际需求如何。

例如，要指示您的代码使用 RTTI（运行时类型信息），请编写：
LOCAL_CPP_FEATURES := rtti
要指示您的代码使用 C++ 异常，请编写：

LOCAL_CPP_FEATURES := exceptions
您还可为此变量指定多个值。例如：

LOCAL_CPP_FEATURES := rtti features
描述值的顺序不重要。
LOCAL_C_INCLUDES
可以使用此可选变量指定相对于 NDK root 目录的路径列表，以便在编译所有源文件（C、C++ 和 Assembly）时添加到 include 搜索路径。 例如：

`LOCAL_C_INCLUDES := sources/foo`
甚至：

`LOCAL_C_INCLUDES := $(LOCAL_PATH)//foo`
在通过 LOCAL_CFLAGS 或 LOCAL_CPPFLAGS 设置任何对应的 include 标志之前定义此变量。

在使用 ndk-gdb 启动本地调试时，构建系统也会自动使用 LOCAL_C_INCLUDES 路径。

LOCAL_CFLAGS
此可选变量为构建系统设置在构建 C 和 C++ 源文件时要传递的编译器标志。 此功能对于指定额外的宏定义或编译选项可能很有用。

尽量不要更改 Android.mk 文件中的优化/调试级别。构建系统可使用 Application.mk 文件中的相关信息自动为您处理此设置。 这样允许构建系统生成在调试时使用的有用数据文件。

注：在 android-ndk-1.5_r1 中，相应的标志只适用于 C 源文件，而不适用于 C++ 源文件。 它们现在与整个 Android 构建系统的行为匹配。（您现在可以使用 LOCAL_CPPFLAGS 只为 C++ 源文件指定标志。）

可通过编写以下代码指定其他 include 路径：

LOCAL_CFLAGS += -I&lt;path&gt;,
但使用 LOCAL_C_INCLUDES 更好，因为这样也可以通过 ndk-gdb 使用可用于本地调试的路径。
LOCAL_CPPFLAGS
仅当构建 C++ 源文件时才会传递一组可选的编译器标志。 它们将出现在编译器命令行中的 LOCAL_CFLAGS 后面。

注：在 android-ndk-1.5_r1 中，相应的标志适用于 C 和 C++ 源文件。 这已经更正，可与整个 Android 构建系统的行为匹配。要为 C 和 C++ 源文件指定标志，请使用 LOCAL_CFLAGS。

LOCAL_STATIC_LIBRARIES
此变量用于存储当前模块依赖的静态库模块列表。

如果当前模块是共享库或可执行文件，此变量将强制这些库链接到生成的二进制文件。

如果当前模块是静态库，此变量只是指示，依赖当前模块的模块也会依赖列出的库。

LOCAL_SHARED_LIBRARIES
此变量是此模块在运行时依赖的共享库模块列表。 此信息在链接时需要，并且会在生成的文件中嵌入相应的信息。

LOCAL_WHOLE_STATIC_LIBRARIES
此变量是 LOCAL_STATIC_LIBRARIES 的变体，表示链接器应将相关的库模块视为整个存档。 如需了解有关整个存档的详细信息，请参阅 GNU 链接器关于 --whole-archive 标志的文档。

当多个静态库之间具有循环相依关系时，此变量很有用。 使用此变量构建共享库时，将会强制构建系统将所有对象文件从静态库添加到最终二进制文件。 但在生成可执行文件时不会发生这样的情况。

LOCAL_LDLIBS
此变量包含在构建共享库或可执行文件时要使用的其他链接器标志列表。 它可让您使用 -l 前缀传递特定系统库的名称。 例如，以下示例指示链接器生成在加载时链接到 /system/lib/libz.so 的模块：

LOCAL_LDLIBS := -lz
如需了解此 NDK 版本中可以链接的已公开系统库列表，请参阅 Android NDK 原生 API。

注： 如果为静态库定义此变量，构建系统会忽略它，并且 ndk-build 会显示一则警告。

LOCAL_LDFLAGS
构建共享库或可执行文件时供构建系统使用的其他链接器标志列表。 例如，以下示例在 ARM/X86 GCC 4.6+ 上使用 ld.bfd 链接器，该系统上的默认链接器是 ld.gold

LOCAL_LDFLAGS += -fuse-ld=bfd
注：如果为静态库定义此变量，构建系统会忽略它，并且 ndk-build 会显示一则警告。

LOCAL_ALLOW_UNDEFINED_SYMBOLS
默认情况下，若构建系统在尝试构建共享库时遇到未定义的引用，将会引发“未定义的符号”错误。 此错误可帮助您捕获源代码中的缺陷。

要停用此检查，请将此变量设置为 true。请注意，此设置可能导致共享库在运行时加载。

注： 如果为静态库定义此变量，构建系统会忽略它，并且 ndk-build 会显示一则警告。

LOCAL_ARM_MODE
默认情况下，构建系统在 thumb 模式中生成 ARM 目标二进制文件，其中每个指令都是 16 位宽，并且与 thumb/ 目录中的 STL 库链接。将此变量定义为 arm 会强制构建系统在 32 位 arm 模式下生成模块的对象文件。 以下示例显示如何执行此操作：

LOCAL_ARM_MODE := arm
您也可以为源文件名附加 .arm 后缀，指示构建系统只在 arm 模式中构建特定的源文件。 例如，以下示例指示构建系统始终在 ARM 模式中编译 bar.c，但根据 LOCAL_ARM_MODE 的值构建 foo.c。

**LOCAL_SRC_FILES := foo.c bar.c.arm**
注：您也可以在 Application.mk 文件中将 APP_OPTIM 设置为 debug，强制构建系统生成 ARM 二进制文件。指定 debug 会强制构建 ARM，因为工具链调试程序无法正确处理 Thumb 代码。

**LOCAL_ARM_NEON**
此变量仅在您针对 armeabi-v7a ABI 时才重要。它允许在 C 和 C++ 源文件中使用 ARM Advanced SIMD (NEON) GCC 内联函数，以及在 Assembly 文件中使用 NEON 指令。

请注意，并非所有基于 ARMv7 的 CPU 都支持 NEON 指令集扩展。因此，必须执行运行时检测以便在运行时安全地使用此代码。 如需了解详细信息，请参阅 NEON 支持和 cpufeatures 库。

或者，您也可以使用 .neon 后缀指定构建系统只编译支持 NEON 的特定源文件。 在以下示例中，构建系统编译支持 thumb 和 neon 的 foo.c、支持 thumb 的 bar.c，以及支持 ARM 和 NEON 的 zoo.c。

LOCAL_SRC_FILES = foo.c.neon bar.c zoo.c.arm.neon
如果您使用两个后缀，.arm 必须在 .neon 前面。

LOCAL_DISABLE_NO_EXECUTE
Android NDK r4 添加了对“NX 位”安全功能的支持。此支持默认启用，但您也可通过将此变量设置为 true 将其停用。 如果没有必要的原因，我们不建议停用。

此功能不会修改 ABI，并且仅在针对 ARMv6+ CPU 设备的内核上启用。 启用此功能的机器代码在运行较早 CPU 架构的设备上将不加修改而直接运行。

如需了解详细信息，请参阅 Wikipedia：NX 位和 GNU 栈快速入门。

**LOCAL_DISABLE_RELRO**


默认情况下，NDK 编译具有只读重定位和 GOT 保护的代码。 此变量指示运行时链接器在重定位后将某些内存区域标记为只读，增加了某些安全漏洞利用（例如 GOT 覆盖）的难度。 请注意，这些保护仅在 Android API 级别 16 和更高版本上有效。在较低的 API 级别上，该代码仍会运行，但没有内存保护。

此变量默认启用，但您也可通过将其值设置为 true 来停用它。 如果没有必要的原因，我们不建议停用。

如需了解详细信息，请参阅 RELRO：重定位只读和 RedHat Enterprise Linux 中的安全增强功能（第 6 节）。

**LOCAL_DISABLE_FORMAT_STRING_CHECKS**

默认情况下，构建系统编译具有格式字符串保护的代码。如果 printf 样式的函数中使用非常量的格式字符串，这样会强制编译器出错。

此保护默认启用，但您也可通过将此变量的值设置为 true 将其停用。 如果没有必要的原因，我们不建议停用。

LOCAL_EXPORT_CFLAGS
此变量用于记录一组 C/C++ 编译器标志，这将标志将添加到通过 LOCAL_STATIC_LIBRARIES 或 LOCAL_SHARED_LIBRARIES 变量使用它们的任何其他模块的 LOCAL_CFLAGS 定义。

例如，假设有以下模块对：foo 和 bar，分别依赖于 foo：

    include $(CLEAR_VARS)
    LOCAL_MODULE := foo
    LOCAL_SRC_FILES := foo/foo.c
    LOCAL_EXPORT_CFLAGS := -DFOO=1
    include $(BUILD_STATIC_LIBRARY)


    include $(CLEAR_VARS)
    LOCAL_MODULE := bar
    LOCAL_SRC_FILES := bar.c
    LOCAL_CFLAGS := -DBAR=2
    LOCAL_STATIC_LIBRARIES := foo
    include $(BUILD_SHARED_LIBRARY)


在这里，构建系统在构建 bar.c 时会向编译器传递标志 -DFOO=1 和 -DBAR=2。 它还会在模块的 LOCAL_CFLAGS 前面加上导出的标志，以便您轻松替换它们。

此外，模块之间的关系也是可传递的：如果 zoo 依赖于 bar，后者又依赖于 foo，则 zoo 也会继承从 foo 导出的所有标志。
最后，构建系统在本地构建时不使用导出的标志（即，构建要导出其标志的模块）。 因此，在上面的示例中，构建 foo/foo.c 时不会将 -DFOO=1 传递到编译器。 要在本地构建，请改用 LOCAL_CFLAGS。

LOCAL_EXPORT_CPPFLAGS
此变量与 LOCAL_EXPORT_CFLAGS 相同，但仅适用于 C++ 标志。

LOCAL_EXPORT_C_INCLUDES
此变量与 LOCAL_EXPORT_CFLAGS 相同，但适用于 C include 路径。例如，当 bar.c 需要包含模块 foo 中的标头时很有用。

LOCAL_EXPORT_LDFLAGS
此变量与 LOCAL_EXPORT_CFLAGS 相同，但适用于链接器标志。

LOCAL_EXPORT_LDLIBS
此变量与 LOCAL_EXPORT_CFLAGS 相同，用于指示构建系统将特定系统库的名称传递到编译器。 在您指定的每个库名称前面附加 -l。

请注意，构建系统会将导入的链接器标志附加到模块的 LOCAL_LDLIBS 变量值。 其原因在于 Unix 链接器运行的方式。

当模块 foo 是静态库并且具有依赖于系统库的代码时，此变量通常很有用。 然后您可以使用 LOCAL_EXPORT_LDLIBS 导出相依关系。 例如：

    include $(CLEAR_VARS)
    LOCAL_MODULE := foo
    LOCAL_SRC_FILES := foo/foo.c
    LOCAL_EXPORT_LDLIBS := -llog
    include $(BUILD_STATIC_LIBRARY)

    include $(CLEAR_VARS)
    LOCAL_MODULE := bar
    LOCAL_SRC_FILES := bar.c
    LOCAL_STATIC_LIBRARIES := foo
    include $(BUILD_SHARED_LIBRARY)



在此示例中，构建系统在构建 libbar.so 时，将在链接器命令的末尾放置 -llog。 这样会告知链接器，由于 libbar.so 依赖于 foo，因此它也依赖于系统日志记录库。

`LOCAL_SHORT_COMMANDS`
当您的模块有很多源文件和/或相依的静态或共享库时，将此变量设置为 true。 这样会强制构建系统对包含中间对象文件或链接库的存档使用 @ 语法。

此功能在 Windows 上可能很有用，其中命令行最多只接受 8191 个字符，这对于复杂的项目可能太少。 它还会影响个别源文件的编译，而且将几乎所有编译器标志放在列表文件内。

请注意，true 以外的任何值都将恢复到默认行为。 您也可在 Application.mk 文件中定义 `APP_SHORT_COMMANDS`，以强制对项目中的所有模块实施此行为。

不建议默认启用此功能，因为它会减慢构建的速度。

`LOCAL_THIN_ARCHIVE`
构建静态库时将此变量设置为 true。这样会生成一个瘦存档 ，即一个库文件，其中不含对象文件，而只包含它通常要包含的实际对象的文件路径。

这对于减小构建输出的大小非常有用。缺点是：这样的库无法移至不同的位置（其中的所有路径都是相对的）。

有效值为 true、false 或空白。可通过 APP_THIN_ARCHIVE 变量在 Application.mk 文件中设置默认值。

注：对于非静态库模块或预构建的静态库模块会忽略此变量。

`LOCAL_FILTER_ASM`
将此变量定义为构建系统要用于过滤从您为 LOCAL_SRC_FILES 指定的文件提取或生成的汇编文件的 shell 命令。

定义此变量会导致发生以下情况：

构建系统从任何 C 或 C++ 源文件生成临时汇编文件，而不是将它们编译到对象文件。
构建系统在任何临时汇编文件以及 LOCAL_SRC_FILES 中所列任何汇编文件的 LOCAL_FILTER_ASM 中执行 shell 命令，因此会生成另一个临时汇编文件。
构建系统将这些过滤的汇编文件编译到对象文件中。
例如：

    LOCAL_SRC_FILES  := foo.c bar.S
    LOCAL_FILTER_ASM :=

    foo.c --1--&gt; $OBJS_DIR/foo.S.original --2--&gt; $OBJS_DIR/foo.S --3--&gt; $OBJS_DIR/foo.o
    bar.S                                 --2--&gt; $OBJS_DIR/bar.S --3--&gt; $OBJS_DIR/bar.o

“1”对应编译器，“2”对应过滤器，“3”对应汇编程序。过滤器必须是采用输入文件名称作为其第一个参数、输出文件名称作为第二个参数的独立 shell 命令。 例如：

    myasmfilter $OBJS_DIR/foo.S.original $OBJS_DIR/foo.S
    myasmfilter bar.S $OBJS_DIR/bar.S

NDK 提供的函数宏
本节说明 NDK 提供的 GNU Make 函数宏。使用 $(call &lt;function&gt;) 对它们估值；它们返回文本信息。

`my-dir`
此宏返回最后包含的 makefile 的路径，通常是当前 Android.mk 的目录。`my-dir` 可用于在 Android.mk 文件的开头定义 LOCAL_PATH。 例如：

`LOCAL_PATH := $(call my-dir)`
由于 GNU Make 运行的方式，此宏实际返回的内容是构建系统在解析构建脚本时包含在最后一个 makefile 的路径。 因此，在包含另一个文件后不应调用 my-dir。

例如，考虑以下示例：

`LOCAL_PATH := $(call my-dir)`

 declare one module

`include $(LOCAL_PATH)/foo/Android.mk`

`LOCAL_PATH := $(call my-dir)`

 declare another module
这里的问题在于，对 my-dir 的第二次调用将 LOCAL_PATH 定义为 $PATH/foo，而不是 $PATH，因为这是其最近 include 指向的位置。

在 Android.mk 文件中的任何其他内容后放置额外 include 可避免此问题。 例如：

`LOCAL_PATH := $(call my-dir)`

... declare one module

`LOCAL_PATH := $(call my-dir)`

... declare another module

 extra includes at the end of the Android.mk file
`include $(LOCAL_PATH)/foo/Android.mk`

如果以这种方式构建文件不可行，请将第一个 my-dir 调用的值保存到另一个变量中。 例如：

`MY_LOCAL_PATH := $(call my-dir)`

`LOCAL_PATH := $(MY_LOCAL_PATH)`



... declare one module

    include $(LOCAL_PATH)/foo/`Android.mk`

    LOCAL_PATH := $(MY_LOCAL_PATH)

... declare another module
all-subdir-makefiles
返回位于当前 my-dir 路径所有子目录中的 Android.mk 文件列表。

可以使用此函数为构建系统提供深入嵌套的源目录层次结构。 默认情况下，NDK 只在包含 Android.mk 文件的目录中查找文件。

this-makefile
返回当前 makefile（构建系统从中调用函数）的路径。

parent-makefile
返回包含树中父 makefile 的路径（包含当前 makefile 的 makefile 路径）。

grand-parent-makefile
返回包含树中祖父 makefile 的路径（包含当前父 makefile 的 makefile 路径）。

import-module
用于按模块的名称查找和包含模块的 Android.mk 文件的函数。 典型的示例如下所示：

$(call import-module,&lt;name&gt;)
在此示例中，构建系统查找 NDK_MODULE_PATH 环境变量引用的目录列表中以 &lt;name&gt; 标记的模块，并且自动为您包含其Android.mk 文件。


## 纯make练习语法。
window使用cygwin64 把bin目录添加到环境变量中
`make -f myfile.mk` 测试一个mk文件。

make默认识别的文件是当前运行目录下的Makefile不带后缀文件。

myfile.mk内容如下

    $(warning nihao)
    LOCAL_PATH:= current_$(call my-dir)
    $(warning $(LOCAL_PATH))

` my-dir`没有输出任何东西，因为这要安卓的ndk-build才有。
测试这个文件的方法
`make -f myfile.mk`
或者在此目录创建Makefile然后输入`include myfile.mk` 执行make将自动执行.

### 定义Make target

#### 语法格式与执行
target名:
TAB命令行名
如

    aa:
        gcc -o hello hello.c
        ./hello.exe

切记gcc前面是用tab隔开的，否则会报错误。
测试执行
`make -f mymake.mk aa`

如果不出意外会编译当前目录的hello.c并执行,前提是hello.c存在以及配置了gcc的环境变量。

#### 完整示例:

    #配置环境变量make,用法 输入 make -f test.mk
    #图标是可以指定的，如果没有指定目标会找到第一个，如果传递了目标比如传递make -f test.mk run:则会执行后者，而不是前者。
    VARIABLE1:= 555
    $(param $(1))
    $(info 2-$(VARIABLE1))
    aa=$(call VARIABLE1,hello,world)#不用冒号也可以定义?/
    $(warning 你可以输入make -f test.mk help执行菜单帮助)

    $(info 2-$(aa))
    help:
        @echo 欢迎学习mk,你如果能执行本文件,那么你应该可以算和我一样已经找到了写make的感觉了。
        @echo 输入make -f 文件 run 执行文件
        @echo 输入make -f 文件 compile 编译文件
        @echo 执行了all任务，
        @echo 你好 你好 target下面的东西都需要用空格隔开，否则会出现语法错误。
        @echo make语法中以艾特开头可以执行系统的命令，如echo就属于.
        
        
        
    $(warning Wellcome Study write makefile)
    TEMP:=HELLO
    $(warning execcompile)#不执行..似乎不能连续输出多个
    compile:bbb #这个值1:值2是必须写的，否则报错。
        gcc -o foo hello.c
        ./foo.exe
        @echo 执行编译完成


    run:
        @echo 执行了run
        ./foo.exe






## 参考资料



[AndroidMk]:https://developer.android.com/ndk/guides/android_mk?hl=zh-cn
[ndk-build]:https://developer.android.com/ndk/guides/ndk-build?hl=zh-cn
[make百科]:https://baike.baidu.com/item/make/17067703?fr=aladdin

[make语法举例]:https://www.cnblogs.com/wang_yb/p/3990952.html
</code></pre>
</div></article></div><div class="right-container"><div class="widget"><div class="category"><h4>分类归档</h4><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android-bug%E5%BC%82%E5%B8%B8%E4%B8%8E%E8%A7%A3%E5%86%B3/">Android-bug异常与解决</a><span class="category-list-count">80</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Blog/">Blog</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Photo/">Photo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/QQ%E6%8A%80%E5%B7%A7/">QQ技巧</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/andorid%E8%A7%A6%E6%91%B8%E4%B8%8E%E6%BB%91%E5%8A%A8/">andorid触摸与滑动</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android/">android</a><span class="category-list-count">159</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android-System/">android-System</a><span class="category-list-count">19</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/androidUi%E5%B7%A9%E5%9B%BA%E7%AC%94%E8%AE%B0/">androidUi巩固笔记</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/androidtv%E5%BC%80%E5%8F%91/">androidtv开发</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android%E5%8A%A8%E7%94%BB/">android动画</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android%E6%8F%92%E4%BB%B6%E5%8C%96/">android插件化</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">android源码分析</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/android%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/">android自定义与图形绘制</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c/">c#</a><span class="category-list-count">62</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/c-c-JNI-Ndk/">c-c---JNI-Ndk</a><span class="category-list-count">88</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/eclipse/">eclipse</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/gradle/">gradle</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ide%E6%8A%80%E5%B7%A7/">ide技巧</a><span class="category-list-count">22</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kotlin-with-java/">kotlin-with-java</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mac-ios/">mac-ios</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">php</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/shell-bat-lua%E8%84%9A%E6%9C%AC/">shell-bat-lua脚本</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/window/">window</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%8A%E8%BD%A6/">上车</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%AC%E5%91%8A/">公告</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8A%9E%E5%85%AC/">办公</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9C%B0%E7%90%83/">地球</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9C%B0%E7%90%83/%E4%B8%AD%E5%9B%BD/">中国</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9C%B0%E7%90%83/%E4%B8%AD%E5%9B%BD/%E6%B9%96%E5%8D%97/">湖南</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9C%B0%E7%90%83/%E4%B8%AD%E5%9B%BD/%E6%B9%96%E5%8D%97/%E5%A8%84%E5%BA%95/">娄底</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9E%83%E5%9C%BE%E5%A0%86/">垃圾堆</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%A5%87%E6%B7%AB%E6%8A%80%E5%B7%A7/">奇淫技巧</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E5%B7%A7/">小程序技巧</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BB%BA%E6%A8%A1/">建模</a><span class="category-list-count">25</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%83%85%E8%BF%81QQ%E6%9C%BA%E5%99%A8%E4%BA%BA/">情迁QQ机器人</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%83%85%E8%BF%81%E8%BD%AF%E4%BB%B6/">情迁软件</a><span class="category-list-count">39</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%89%93%E8%B5%8F/">打赏</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E5%AD%A6/">数学</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%A5%E8%AE%B0%E6%9C%AC/">日记本</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B1%87%E7%BC%96/">汇编</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96/">测试与自动化</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/">游戏开发</a><span class="category-list-count">68</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/">版本控制</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A1%AC%E4%BB%B6%E7%BB%B4%E4%BF%AE/">硬件维修</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%91%E5%B9%BB/">科幻</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E6%95%B0%E5%AD%A6%E9%97%AE%E9%A2%98/">程序员的数学问题</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E6%9D%82%E9%A1%B9/">编程杂项</a><span class="category-list-count">29</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/">网站建设</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BE%8E%E5%A5%B3/">美女</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BF%BB%E8%AF%91%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/">翻译视频教程</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%B0%E5%BF%86/">记忆</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%A8%E5%B9%B3%E5%8F%B0app/">跨平台app</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%AF%E7%94%B1%E5%99%A8/">路由器</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%86%E5%90%91/">逆向</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%80%86%E5%90%91%E4%B8%8E%E5%AE%89%E5%85%A8/">逆向与安全</a><span class="category-list-count">91</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95%E6%94%BB%E5%85%8B/">面试攻克</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/">音视频处理</a><span class="category-list-count">7</span></li></ul></div></div><div class="widget"><div class="tagcloud"><h4>标签云</h4><a href="/tags/Android-bug%E5%BC%82%E5%B8%B8%E4%B8%8E%E8%A7%A3%E5%86%B3/" style="font-size: 18.97px;">Android-bug异常与解决</a> <a href="/tags/CDN/" style="font-size: 10px;">CDN</a> <a href="/tags/Git/" style="font-size: 10.34px;">Git</a> <a href="/tags/JAVA/" style="font-size: 10px;">JAVA</a> <a href="/tags/Lua/" style="font-size: 10px;">Lua</a> <a href="/tags/QQ%E6%8A%80%E5%B7%A7/" style="font-size: 10px;">QQ技巧</a> <a href="/tags/WEB/" style="font-size: 10.34px;">WEB</a> <a href="/tags/andorid%E8%A7%A6%E6%91%B8%E4%B8%8E%E6%BB%91%E5%8A%A8/" style="font-size: 13.1px;">andorid触摸与滑动</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/android-studio/" style="font-size: 10px;">android studio</a> <a href="/tags/android-System/" style="font-size: 15.52px;">android-System</a> <a href="/tags/androidUi%E5%B7%A9%E5%9B%BA%E7%AC%94%E8%AE%B0/" style="font-size: 11.38px;">androidUi巩固笔记</a> <a href="/tags/androidtv%E5%BC%80%E5%8F%91/" style="font-size: 10.34px;">androidtv开发</a> <a href="/tags/android%E5%8A%A8%E7%94%BB/" style="font-size: 10.69px;">android动画</a> <a href="/tags/android%E6%8F%92%E4%BB%B6%E5%8C%96/" style="font-size: 14.14px;">android插件化</a> <a href="/tags/android%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" style="font-size: 12.07px;">android源码分析</a> <a href="/tags/android%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%9B%BE%E5%BD%A2%E7%BB%98%E5%88%B6/" style="font-size: 16.21px;">android自定义与图形绘制</a> <a href="/tags/c/" style="font-size: 18.28px;">c#</a> <a href="/tags/c-c-JNI-Ndk/" style="font-size: 19.31px;">c-c---JNI-Ndk</a> <a href="/tags/consectetur/" style="font-size: 10px;">consectetur</a> <a href="/tags/eclipse/" style="font-size: 12.07px;">eclipse</a> <a href="/tags/git/" style="font-size: 13.1px;">git</a> <a href="/tags/gradle/" style="font-size: 16.9px;">gradle</a> <a href="/tags/ide%E6%8A%80%E5%B7%A7/" style="font-size: 16.55px;">ide技巧</a> <a href="/tags/java/" style="font-size: 15.17px;">java</a> <a href="/tags/kotlin-with-java/" style="font-size: 16.21px;">kotlin-with-java</a> <a href="/tags/linux/" style="font-size: 11.72px;">linux</a> <a href="/tags/mac-ios/" style="font-size: 17.59px;">mac-ios</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/php/" style="font-size: 13.1px;">php</a> <a href="/tags/python/" style="font-size: 15.86px;">python</a> <a href="/tags/shell-bat-lua%E8%84%9A%E6%9C%AC/" style="font-size: 12.76px;">shell-bat-lua脚本</a> <a href="/tags/window/" style="font-size: 15.17px;">window</a> <a href="/tags/xposed%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">xposed插件</a> <a href="/tags/%E4%B8%83%E7%89%9B/" style="font-size: 10px;">七牛</a> <a href="/tags/%E4%B8%8A%E8%BD%A6/" style="font-size: 11.72px;">上车</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99/" style="font-size: 10px;">代码编写</a> <a href="/tags/%E5%85%8DRoot/" style="font-size: 10px;">免Root</a> <a href="/tags/%E5%85%AC%E5%91%8A/" style="font-size: 10.69px;">公告</a> <a href="/tags/%E5%88%86%E8%BA%AB%E5%A4%A7%E5%B8%88/" style="font-size: 10px;">分身大师</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 13.1px;">前端</a> <a href="/tags/%E5%8A%9E%E5%85%AC/" style="font-size: 10px;">办公</a> <a href="/tags/%E5%90%8E%E7%AB%AF/" style="font-size: 10px;">后端</a> <a href="/tags/%E5%9B%BE%E7%89%87/" style="font-size: 10px;">图片</a> <a href="/tags/%E5%9E%83%E5%9C%BE%E5%A0%86/" style="font-size: 14.83px;">垃圾堆</a> <a href="/tags/%E5%A5%87%E6%B7%AB%E6%8A%80%E5%B7%A7/" style="font-size: 13.45px;">奇淫技巧</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E5%B7%A7/" style="font-size: 14.14px;">小程序技巧</a> <a href="/tags/%E5%BB%BA%E6%A8%A1/" style="font-size: 17.24px;">建模</a> <a href="/tags/%E6%83%85%E8%BF%81QQ%E6%9C%BA%E5%99%A8%E4%BA%BA/" style="font-size: 10px;">情迁QQ机器人</a> <a href="/tags/%E6%83%85%E8%BF%81%E8%BD%AF%E4%BB%B6/" style="font-size: 17.93px;">情迁软件</a> <a href="/tags/%E6%89%93%E8%B5%8F/" style="font-size: 10px;">打赏</a> <a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">插件</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 11.72px;">数学</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 12.07px;">数据库</a> <a href="/tags/%E6%97%A5%E8%AE%B0%E6%9C%AC/" style="font-size: 10.69px;">日记本</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/" style="font-size: 10px;">机器人</a> <a href="/tags/%E6%B1%87%E7%BC%96/" style="font-size: 10px;">汇编</a> <a href="/tags/%E6%B5%8B%E8%AF%95%E4%B8%8E%E8%87%AA%E5%8A%A8%E5%8C%96/" style="font-size: 10.34px;">测试与自动化</a> <a href="/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/" style="font-size: 18.62px;">游戏开发</a> <a href="/tags/%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6/" style="font-size: 10.34px;">版本控制</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 14.48px;">生活</a> <a href="/tags/%E7%A1%AC%E4%BB%B6%E7%BB%B4%E4%BF%AE/" style="font-size: 10px;">硬件维修</a> <a href="/tags/%E7%A7%91%E5%B9%BB/" style="font-size: 10px;">科幻</a> <a href="/tags/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E6%95%B0%E5%AD%A6%E9%97%AE%E9%A2%98/" style="font-size: 13.45px;">程序员的数学问题</a> <a href="/tags/%E7%BC%96%E7%A8%8B%E6%9D%82%E9%A1%B9/" style="font-size: 17.59px;">编程杂项</a> <a href="/tags/%E7%BF%BB%E8%AF%91%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B/" style="font-size: 10px;">翻译视频教程</a> <a href="/tags/%E8%97%8F%E5%93%81/" style="font-size: 20px;">藏品</a> <a href="/tags/%E8%A7%86%E9%A2%91/" style="font-size: 10px;">视频</a> <a href="/tags/%E8%AE%B0%E5%BF%86/" style="font-size: 11.03px;">记忆</a> <a href="/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0app/" style="font-size: 13.79px;">跨平台app</a> <a href="/tags/%E8%B7%AF%E7%94%B1%E5%99%A8/" style="font-size: 12.41px;">路由器</a> <a href="/tags/%E9%80%86%E5%90%91/" style="font-size: 10px;">逆向</a> <a href="/tags/%E9%80%86%E5%90%91%E4%B8%8E%E5%AE%89%E5%85%A8/" style="font-size: 19.66px;">逆向与安全</a> <a href="/tags/%E9%93%BE%E6%8E%A5/" style="font-size: 10.34px;">链接</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 11.38px;">随笔</a> <a href="/tags/%E9%9D%A2%E8%AF%95%E6%94%BB%E5%85%8B/" style="font-size: 10.34px;">面试攻克</a> <a href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/" style="font-size: 12.07px;">音视频处理</a></div></div><div class="widget"><div class="recent"><h4>最近文章</h4><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2023/03/13/android-rxjava%E6%96%87%E6%9C%AC%E6%94%B9%E5%8F%98-%E5%88%87%E6%8D%A2%E5%90%8E%E5%8F%B0%E6%89%A7%E8%A1%8C-%E8%80%97%E6%97%B6%E5%A4%84%E7%90%86%E5%AE%8C%E6%AF%95%E5%86%8D%E8%BF%94%E5%9B%9E/">androidrxjava文本改变切换后台执行耗时处理完毕再返回</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/03/11/java%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AE%9A%E4%B9%89%E8%84%9A%E6%9C%AC%E8%A7%84%E5%88%99,%E8%A7%A3%E6%9E%90%E7%AE%80%E5%8D%95%E7%9A%84%E8%84%9A%E6%9C%AC%E5%AE%9E%E7%8E%B0%E6%89%93%E5%8D%B0%E5%9B%BE%E5%BD%A2%E5%B8%83%E5%B1%80%E5%AE%9A%E5%88%B6-%E5%92%A8%E8%AF%A2%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E6%89%BE%E5%AE%9E%E7%8E%B0%E7%81%B5%E6%84%9F1%E5%B0%8F%E6%97%B6%E5%AE%9E%E7%8E%B0/">java自定义定义脚本规则解析简单的脚本实现打印图形布局定制咨询人工智能找实现灵感1小时实现</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/03/11/%E6%95%B0%E5%AD%A6%E5%88%86%E9%85%8D%E7%9A%84%E7%AE%80%E5%8D%95%E5%A5%97%E8%B7%AF%E4%BB%A3%E7%A0%81/">数学分配的简单套路代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/03/03/%5B%E5%8E%9F%E5%88%9B%5Dandroid%E7%A6%81%E6%AD%A2%E7%BC%96%E8%BE%91%E6%A1%86%E7%BC%96%E8%BE%91%E4%BD%86%E6%98%AF%E5%85%81%E8%AE%B8%E9%80%89%E6%8B%A9%E6%9F%A5%E7%9C%8B%E5%86%85%E5%AE%B9%E8%B6%85%E5%87%BA%E7%9A%84%E9%83%A8%E5%88%86%E7%9A%84%E6%96%B9%E6%B3%95/">原创android禁止编辑框编辑但是允许选择查看内容超出的部分的方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/28/%5Bandroid%5D%E8%8A%B1%E4%BA%86%E7%82%B9%E6%97%B6%E9%97%B4%E7%A0%94%E7%A9%B6%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0%E6%97%8B%E8%BD%AC%E5%8A%A8%E7%94%BB/">android花了点时间研究三种方法实现旋转动画</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/02/25/HOOKUI%E7%95%8C%E9%9D%A2%E4%B8%8E%E5%9B%BE%E6%A0%87/">HOOKUI界面与图标</a></li></ul></div></div><div class="widget"><div id="arAnchorBar"></div></div></div></section></div><div class="right-menu"></div><div class="modal search-modal"><div class="input-field"><input type="text" id="search_input"><label for="search-input">搜索</label></div><div id="search_result" class="search-result"></div></div><div class="blog-overlay"></div><footer class="row"><div class="footer-con"><div class="paginator"><a href="/2018/11/28/make%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9B%B8%E5%85%B3%E6%96%B9%E6%B3%95%E5%87%BD%E6%95%B0%E4%BC%A0%E5%8F%82/" class="prev">PREV</a><a href="/2018/11/22/%E5%AE%89%E5%8D%93-smali%E5%90%AF%E5%8A%A8%E5%B0%B1%E9%99%84%E5%8A%A0%E8%B0%83%E8%AF%95-%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%AD%A5%E9%AA%A4/" class="next">NEXT</a></div><!--PC和WAP自适应版--><div id="SOHUCS" sid="2018/11/28/Android-Mk-Application-Mk-make-makefile笔记/"> </div><script>(function() {
    var appid = 'cytVgXm93'; 
    var conf = 'e46b9c0a4ede5c70e062020c1d3651e1';
    var width = window.innerWidth || document.documentElement.clientWidth; 
    if (width < 960) { 
    window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })();</script><div class="copyright"><p>© 2015 - 2023 <a target="_blank">情随事迁</a>, 微博 <a href="https://weibo.com/qssq666" target="_blank">qssq666</a> <br>  <a href="https://space.bilibili.com/101043764?spm_id_from=333.1007.0.0" target="_blank">bilibli</a>  <a href="https://www.jianshu.com/u/9b0768e66d01" target="_blank">简书</a></p><p>总计访问量 <i data-hk-site="-"></i></p></div><div class="totop"><i></i></div></div></footer>
<script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="http://apps.bdimg.com/libs/jquery/1.8.2/jquery.min.js"></script><script src="/scripts/av-min-1.5.0.js"></script><script src="/scripts/hit-kounter-lc-0.3.0.js"></script><script src="/scripts/arAnchor.js"></script><script src="/scripts/main.js"></script></body></html>